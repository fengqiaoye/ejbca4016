<% String[] eventnames     = logbean.getAllLocalEventNames();
   String[] modulenames    = logbean.getLocalModuleNames(ejbcawebbean);
   HashMap  eventtexttoid  = logbean.getTranslatedEventNameToIdMap();
   HashMap  moduletexttoid = logbean.getModuleNameToIdMap();
   Map  caidtonamemap  = ejbcawebbean.getInformationMemory().getCAIdToNameMap();
   Collection authorizedcaids = ejbcawebbean.getAuthorizedCAIds();
   
   String[] admintypes = new String[ADMINTYPES.length];
   for(int i=0; i < ADMINTYPES.length; i++){
     admintypes[i] = ejbcawebbean.getText(ADMINTYPES[i]);
   }
 
   String[] connectorreferences = {"AND","OR","ANDNOT","ORNOT"};
   String[] monthreferences     = {"MONTHJAN","MONTHFEB","MONTHMAR","MONTHAPR","MONTHMAY","MONTHJUN","MONTHJUL","MONTHAUG","MONTHSEP"
                                  ,"MONTHOCT","MONTHNOV","MONTHDEC"};
   Calendar calendar = Calendar.getInstance();
   int dayofmonth    = calendar.get(Calendar.DAY_OF_MONTH);
   int month         = calendar.get(Calendar.MONTH);
   int year          = calendar.get(Calendar.YEAR);
   int hour          = calendar.get(Calendar.HOUR_OF_DAY);
   hour++;
   if(hour >= 24) hour =0;

   int index;

   // Build sorted CA name List
   TreeMap canameandids = new TreeMap();
   Iterator iter = authorizedcaids.iterator();
   while(iter.hasNext()){
     Object obj = iter.next();
     canameandids.put(caidtonamemap.get(obj),obj);
   }
      
%> 

<script type="text/javascript">
<!--
   var ID    = 0;
   var NAME  = 1;
  
   var eventfields   = new Array(2);
   eventfields[ID]   = new Array(<%= eventnames.length %>);
   eventfields[NAME] = new Array(<%= eventnames.length %>);
   <% for(int i = 0; i < eventnames.length; i++){ %>
      eventfields[ID][<%=i %>]   = "<%=eventtexttoid.get(eventnames[i]) %>";
      eventfields[NAME][<%=i %>]  = "<%=eventnames[i] %>";
    <% } %>

   var cafields = new Array(2);
   cafields[ID] = new Array(<%= authorizedcaids.size() %>);
   cafields[NAME] = new Array(<%= authorizedcaids.size() %>);
   <% Iterator canameiter = canameandids.keySet().iterator();
      for(int i=0; i < canameandids.keySet().size(); i++){
         String caname = (String) canameiter.next(); %>
   cafields[ID][<%=i%>] = <%= ((Integer) canameandids.get(caname)).toString() %>;   
   cafields[NAME][<%=i%>] = "<%= caname%>";
   <% } %>

   var modulefields   = new Array(2);
   modulefields[ID]   = new Array(<%= modulenames.length %>);
   modulefields[NAME] = new Array(<%= modulenames.length %>);
   <% for(int i = 0; i < modulenames.length; i++){ %>
      modulefields[ID][<%=i %>]   = "<%=moduletexttoid.get(modulenames[i]) %>";
      modulefields[NAME][<%=i %>]  = "<%=modulenames[i] %>";
    <% } %>

   
   var admintypes = new Array(2);
   admintypes[ID]   = new Array(<%= ADMINTYPES.length %>);
   admintypes[NAME] = new Array(<%= ADMINTYPES.length %>);
   <% for(int i = 0; i <ADMINTYPES.length ; i++){ %>
      admintypes[ID][<%=i %>] = "<%=i%>";
      admintypes[NAME][<%=i %>] = "<%=ejbcawebbean.getText(ADMINTYPES[i])%>";
    <% } %>
   
   var matchtypefields = new Array(2);
   matchtypefields[ID] = new Array(2);
   matchtypefields[ID][0]= <%= BasicMatch.MATCH_TYPE_EQUALS %>;
   matchtypefields[ID][1] = <%= BasicMatch.MATCH_TYPE_BEGINSWITH %>;
   matchtypefields[ID][2] = <%= BasicMatch.MATCH_TYPE_CONTAINS %>;

   matchtypefields[NAME] = new Array(3);
   matchtypefields[NAME][0] = "<%= ejbcawebbean.getText("EQUALS", true) %>";
   matchtypefields[NAME][1] = "<%= ejbcawebbean.getText("BEGINSWITH", true) %>";
   matchtypefields[NAME][2] = "<%= ejbcawebbean.getText("CONTAINS", true) %>";



function changematchfields(row){

 // check value on matchwith
  matchwith = eval("document.form.selectmatchwithrow" + row);
  matchtype = eval("document.form.selectmatchtyperow" + row);
  textmatchvalue = eval("document.form.textfieldmatchvaluerow" + row);
  menumatchvalue = eval("document.form.selectmatchvaluerow" + row);
  var index = matchwith.selectedIndex;
  var numofvalues;
  matchwithvalue = matchwith[index].value;  
  var i;

   // if eventname use menu and no texfield
  if(matchwithvalue == <%= LogMatch.MATCH_WITH_EVENT %> ){

    menumatchvalue.disabled = false;
    textmatchvalue.disabled = true;
    textmatchvalue.value= "";
    textmatchvalue.size=1;

    var numoftypes = matchtype.length;
    for( i=numoftypes-1; i >= 0; i-- ){
      matchtype.options[i]=null;
     }
     matchtype.options[0]= new Option(matchtypefields[NAME][0],matchtypefields[ID][0]);

     numofvalues = menumatchvalue.length;
     for(i=numofvalues-1; i >= 0; i--){
       menumatchvalue.options[i]=null;
     }  
     for( i = 0; i < eventfields[ID].length; i++){
       menumatchvalue.options[i]= new Option(eventfields[NAME][i],eventfields[ID][i]);       
     }
  }else if(matchwithvalue == <%= LogMatch.MATCH_WITH_CA %> ){

      menumatchvalue.disabled = false;
      textmatchvalue.disabled = true;
      textmatchvalue.value= "";
      textmatchvalue.size=1;

     var numoftypes = matchtype.length;
     for( i=numoftypes-1; i >= 0; i-- ){
       matchtype.options[i]=null;
     }
     matchtype.options[0]= new Option(matchtypefields[NAME][0],matchtypefields[ID][0]);

     numofvalues = menumatchvalue.length;
     for(i=numofvalues-1; i >= 0; i--){
       menumatchvalue.options[i]=null;
     }  
     for( i = 0; i < cafields[ID].length; i++){
       menumatchvalue.options[i]= new Option(cafields[NAME][i],cafields[ID][i]);       
     }
  } else if(matchwithvalue == <%= LogMatch.MATCH_WITH_MODULE %> ){

        menumatchvalue.disabled = false;
        textmatchvalue.disabled = true;
        textmatchvalue.value= "";
        textmatchvalue.size=1;

        var numoftypes = matchtype.length;
        for( i=numoftypes-1; i >= 0; i-- ){
          matchtype.options[i]=null;
        }
        matchtype.options[0]= new Option(matchtypefields[NAME][0],matchtypefields[ID][0]);

        numofvalues = menumatchvalue.length;
        for(i=numofvalues-1; i >= 0; i--){
          menumatchvalue.options[i]=null;
        }  
        for( i = 0; i < modulefields[ID].length; i++){
         menumatchvalue.options[i]= new Option(modulefields[NAME][i],modulefields[ID][i]);       
        }
  } else if(matchwithvalue == <%= LogMatch.MATCH_WITH_SPECIALADMIN %> ){
        // if admintype use manu and no textfield. 

          menumatchvalue.disabled = false;
          textmatchvalue.disabled = true;
          textmatchvalue.value= "";
          textmatchvalue.size=1;

          var numoftypes = matchtype.length;
          for( i=numoftypes-1; i >= 0; i-- ){
            matchtype.options[i]=null;
          }
          matchtype.options[0]= new Option(matchtypefields[NAME][0],matchtypefields[ID][0]);

          numofvalues = menumatchvalue.length;
          for(i=numofvalues-1; i >= 0; i--){
            menumatchvalue.options[i]=null;
          }  
          for( i = 0; i < admintypes[ID].length; i++){
            menumatchvalue.options[i]= new Option(admintypes[NAME][i],admintypes[ID][i]);       
          }
      
  } else if(matchwithvalue == <%= LogMatch.MATCH_WITH_ADMINCERTIFICATE %> ){
         // if admin certificate, use 'begin with' and textfield.
            menumatchvalue.disabled = true;
            textmatchvalue.disabled = false;
            textmatchvalue.size = 20;

            var numoftypes = matchtype.length;
            for( i=numoftypes-1; i >= 0; i-- ){
                matchtype.options[i]=null;
            }
            matchtype.options[0]= new Option(matchtypefields[NAME][1],matchtypefields[ID][1]);
            matchtype.options[1]= new Option(matchtypefields[NAME][2],matchtypefields[ID][2]);

            numofvalues = menumatchvalue.length;
            for(i=numofvalues-1; i >= 0; i--){
                menumatchvalue.options[i]=null;
            }     
  } else{
         // else use textfield.  
     
          var numoftypes = matchtype.length;
          for(i=numoftypes-1; i >= 0; i-- ){
            matchtype.options[i]=null;
          }
          matchtype.options[0]= new Option(matchtypefields[NAME][0],matchtypefields[ID][0]);
          matchtype.options[1]= new Option(matchtypefields[NAME][1],matchtypefields[ID][1]);
          matchtype.options[2]= new Option(matchtypefields[NAME][2],matchtypefields[ID][2]);

          numofvalues = menumatchvalue.length;
          for(i=numofvalues-1; i >= 0; i--){
            menumatchvalue.options[i]=null;
          }     
          menumatchvalue.disabled = true;
          textmatchvalue.disabled = false;
          textmatchvalue.size = 20;
  }
} //end function


function checkfields(){
  var returnval =true;
  // Check if matchwithfield is admin cert or certificate when check and replace spaces in hex serial number.
  var matchwithrows1 = eval("document.form.selectmatchwithrow1");
  var matchwithrows2 = eval("document.form.selectmatchwithrow2");
  var matchwithrows3 = eval("document.form.selectmatchwithrow3");

  if(matchwithrows1[matchwithrows1.selectedIndex].value == <%=LogMatch.MATCH_WITH_CERTIFICATE %> || matchwithrows1[matchwithrows1.selectedIndex].value == <%= LogMatch.MATCH_WITH_ADMINCERTIFICATE%>)
    if(!checkfieldforhexadecimalnumbers("document.form.selectmatchwithrow1", "<%= ejbcawebbean.getText("ONLYHEXNUMBERS") %>"))
      returnval = false;

  if(matchwithrows2[matchwithrows2.selectedIndex].value == <%= LogMatch.MATCH_WITH_CERTIFICATE %> || matchwithrows2[matchwithrows2.selectedIndex].value == <%= LogMatch.MATCH_WITH_ADMINCERTIFICATE%>)
    if(!checkfieldforhexadecimalnumbers("document.form.selectmatchwithrow2" , "<%= ejbcawebbean.getText("ONLYHEXNUMBERS") %>"))
      returnval = false;

  if(matchwithrows3[matchwithrows3.selectedIndex].value == <%= LogMatch.MATCH_WITH_CERTIFICATE %> || matchwithrows3[matchwithrows3.selectedIndex].value == <%= LogMatch.MATCH_WITH_ADMINCERTIFICATE%>)
    if(!checkfieldforhexadecimalnumbers("document.form.selectmatchwithrow3" , "<%= ejbcawebbean.getText("ONLYHEXNUMBERS") %>"))
      returnval = false;

  return returnval; 
}


 -->
</script>
<table class="search" width="100%" border="0" cellspacing="1" cellpadding="0">

  <!-- ---------- ROW 0 ---------- -->

  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="5%" align="left">&nbsp;</td>
    <td width="93%" align="left"> 
      <select name="<%=SELECT_VIEWLOGDEVICE %>" >
        <% Collection availableLogDevices = logbean.getAvailableQueryLogDevices();
           Iterator iteradv = availableLogDevices.iterator();
           while(iteradv.hasNext()){
             String deviceName = (String) iteradv.next();
             String deviceSelected = (deviceName.equalsIgnoreCase(request.getParameter(SELECT_VIEWLOGDEVICE)) ? "selected" : ""); %>
             <option value='<c:out value="<%=deviceName %>"/>' <c:out value="<%=deviceSelected %>"/> ><c:out value="<%=deviceName %>" /></option>
        <% } %>
      </select> 
    </td>
  </tr>


  <!-- ---------- ROW 1 ---------- -->

  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="5%" align="left">&nbsp;
    </td>
    <td width="93%" align="left"> 
        <% int tempval = -1;
           if(oldmatchwithrow1!= null)
             tempval= Integer.parseInt(oldmatchwithrow1); %>
        <select name="<%=SELECT_MATCHWITH_ROW1 %>" onchange='changematchfields(1)' >
           <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_EVENT)
                         out.write(" selected ");
                    %> value='<c:out value="<%= LogMatch.MATCH_WITH_EVENT %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHEVENT\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_CA)
                         out.write(" selected ");
                    %> value='<c:out value="<%= LogMatch.MATCH_WITH_CA %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCA\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_MODULE)
                         out.write(" selected ");
                    %> value='<c:out value="<%= LogMatch.MATCH_WITH_MODULE %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHMODULE\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_USERNAME)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_USERNAME %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHUSERNAME\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_CERTIFICATE)
                         out.write(" selected ");
                         %> value='<c:out value="<%= LogMatch.MATCH_WITH_CERTIFICATE %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCERTIFICATE\") %>" />
           </option>
           <option <%if(tempval == LogMatch.MATCH_WITH_SPECIALADMIN)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_SPECIALADMIN %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINTYPE\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_ADMINCERTIFICATE)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_ADMINCERTIFICATE %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINCERT\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_IP)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_IP %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINIP\") %>" />
          </option>
          <option <%if(tempval == LogMatch.MATCH_WITH_COMMENT)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_COMMENT %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCOMMENT\") %>" />
          </option>
        </select> &nbsp;&nbsp;
          <%
           tempval = -1;
           if(oldmatchtyperow1!= null)
             tempval= Integer.parseInt(oldmatchtyperow1);
          %>
        <select name="<%=SELECT_MATCHTYPE_ROW1 %>">
          <% if(oldmatchwithrow1 != null){
               if(Integer.parseInt(oldmatchwithrow1) == LogMatch.MATCH_WITH_EVENT || Integer.parseInt(oldmatchwithrow1) == LogMatch.MATCH_WITH_MODULE 
                 || Integer.parseInt(oldmatchwithrow1) == LogMatch.MATCH_WITH_SPECIALADMIN || Integer.parseInt(oldmatchwithrow1) == LogMatch.MATCH_WITH_CA){ %>
          <option <%  if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option>

              <% } else if (Integer.parseInt(oldmatchwithrow1) == LogMatch.MATCH_WITH_ADMINCERTIFICATE) { %>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH) {
                        out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
          </option> 
              <% } else{ %>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
          </option> 
            <%  }
              }else{%>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
           <% } %>  
        </select> &nbsp;&nbsp; 

        <select name="<%=SELECT_MATCHVALUE_ROW1 %>"
           <% if(oldmatchwithrow1 != null){
                 if(oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_EVENT))){ %>
              >
                <% for(int i=0; i < eventnames.length; i++){ %>
          <option <% if(oldmatchvaluerow1!= null){
                       if(Integer.parseInt(oldmatchvaluerow1) == ((Integer) eventtexttoid.get(eventnames[i])).intValue())
                         out.write(" selected ");
                    } %> value='<c:out value="<%= ((Integer) eventtexttoid.get(eventnames[i])).intValue() %>"/>'><c:out value="<%= eventnames[i] %>" />
          </option>                   
                <%  }
                  }
                  else{
                   if(oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN))){ %>
              >
                <% for(int i=0; i < ADMINTYPES.length; i++){ %>
          <option <% if(oldmatchvaluerow1!= null){
                       if(oldmatchvaluerow1.equals(Integer.toString(i)))
                         out.write(" selected ");
                    } %> value='<%= i %>'><c:out value="<%= ejbcawebbean.getText(ADMINTYPES[i]) %>" />
          </option>                   
                <%  }
                  }
                  else{
                  if(oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_CA))){ %>
              >
                <% 
                   canameiter = canameandids.keySet().iterator();
                   for(int i=0; i < canameandids.keySet().size(); i++){ %>
          <option <% 
                      String caname = (String) canameiter.next(); 
                      index = ((Integer) canameandids.get(caname)).intValue(); 
                      if(oldmatchvaluerow1!= null){
                         if(oldmatchvaluerow1.equals(Integer.toString(index)))
                          out.write(" selected ");
                      }
                     %> value='<c:out value="<%= index %>"/>'><c:out value="<%= caname %>" />
          </option>                    
                <%  }
                  }
                  else{
                   if(oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_MODULE))){ %>
              >
                <% for(int i=0; i < modulenames.length; i++){ %>
          <option <% index = ((Integer) moduletexttoid.get(modulenames[i])).intValue();
                      if(oldmatchvaluerow1!= null){
                         if(oldmatchvaluerow1.equals(Integer.toString(index)))
                          out.write(" selected ");
                      }
                     %> value='<c:out value="<%= index %>"/>'><c:out value="<%= modulenames[i] %>" />
          </option>                    
                <%  }
                  }
                  else{ %>
                   disabled > 
                 <% } 
                }}}
              }else{ %>
                disabled > 
           <% } %>
       </select>
       <% if( oldmatchwithrow1!= null){
           if(  oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_EVENT)) || Integer.parseInt(oldmatchwithrow1) == LogMatch.MATCH_WITH_MODULE 
                || oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN)) || oldmatchwithrow1.equals(Integer.toString(LogMatch.MATCH_WITH_CA))){ %>
       <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW1 %>"  size="1" maxlength="255" value='' disabled >    
           <% }else{ %>
              <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW1 %>" size="20" maxlength="255" value='<c:out value="<%=oldmatchvaluerow1 %>"/>' >
           <% }
           }else{ %>
              <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW1 %>" size="20" maxlength="255" value='' >
        <% } %>
    </td>
  </tr>


  <!-- ---------- ROW 2 ---------- -->

  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="5%" align="left">
       <select name='<%= SELECT_CONNECTOR_ROW2  %>'>  
         <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>" />
         </option>
         <% for(int i=0; i<  connectorreferences.length; i++) { %> 
         <option <% if(oldconnectorrow2 != null)
                      if(oldconnectorrow2.equals(Integer.toString(i))) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
           <c:out value="<%= ejbcawebbean.getText(connectorreferences[i]) %>" />
         </option> 
         <% } %> 
       </select>
    </td>
    <td width="93%" align="left"> 
        <% tempval = -1;
           if(oldmatchwithrow2!= null)
             tempval= Integer.parseInt(oldmatchwithrow2); %>
        <select name="<%=SELECT_MATCHWITH_ROW2 %>" onchange='changematchfields(2)' >
           <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_EVENT)
                         out.write(" selected ");
                    %> value='<c:out value="<%=LogMatch.MATCH_WITH_EVENT %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHEVENT\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_CA)
                         out.write(" selected ");
                    %> value='<c:out value="<%= LogMatch.MATCH_WITH_CA %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCA\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_MODULE)
                         out.write(" selected ");
                    %> value='<c:out value="<%= LogMatch.MATCH_WITH_MODULE%>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHMODULE\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_USERNAME)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_USERNAME %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHUSERNAME\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_CERTIFICATE)
                         out.write(" selected ");
                         %> value='<c:out value="<%= LogMatch.MATCH_WITH_CERTIFICATE %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCERTIFICATE\") %>" />
           </option>
           <option <%if(tempval == LogMatch.MATCH_WITH_SPECIALADMIN)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_SPECIALADMIN %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINTYPE\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_ADMINCERTIFICATE)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_ADMINCERTIFICATE %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINCERT\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_IP)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_IP %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINIP\") %>" />
          </option>
          <option <%if(tempval == LogMatch.MATCH_WITH_COMMENT)
                         out.write(" selected ");
                     %> value='<c:out value="<%= LogMatch.MATCH_WITH_COMMENT %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCOMMENT\") %>" />
          </option>
        </select> &nbsp;&nbsp;
          <%
           tempval = -1;
           if(oldmatchtyperow2!= null)
             tempval= Integer.parseInt(oldmatchtyperow2);
          %>
        <select name="<%=SELECT_MATCHTYPE_ROW2 %>">
          <% if(oldmatchwithrow2 != null){
               if(Integer.parseInt(oldmatchwithrow2) == LogMatch.MATCH_WITH_EVENT || Integer.parseInt(oldmatchwithrow2) == LogMatch.MATCH_WITH_MODULE 
                  || Integer.parseInt(oldmatchwithrow2) == LogMatch.MATCH_WITH_SPECIALADMIN || Integer.parseInt(oldmatchwithrow2) == LogMatch.MATCH_WITH_CA){ %>
          <option <%  if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option>
             <%  } else if (Integer.parseInt(oldmatchwithrow2) == LogMatch.MATCH_WITH_ADMINCERTIFICATE) { %>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH) {
                        out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
          </option> 
                <% } else{ %>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
          </option> 
            <%  }
              }else{%>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
           <% } %>  
        </select> &nbsp;&nbsp; 

        <select name="<%=SELECT_MATCHVALUE_ROW2 %>"
           <% if(oldmatchwithrow2 != null){
                 if(oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_EVENT))){ %>
              >
                <% for(int i=0; i < eventnames.length; i++){ %>
          <option <% if(oldmatchvaluerow2!= null){
                       if(Integer.parseInt(oldmatchvaluerow2) == ((Integer) eventtexttoid.get(eventnames[i])).intValue())
                         out.write(" selected ");
                    } %> value='<c:out value="<%= ((Integer) eventtexttoid.get(eventnames[i])).intValue() %>"/>'><c:out value="<%= eventnames[i] %>" />
          </option>                   
                <%  }
                  }
                  else{
                   if(oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN))){ %>
              >
                <% for(int i=0; i < ADMINTYPES.length; i++){ %>
          <option <% if(oldmatchvaluerow2!= null){
                       if(oldmatchvaluerow2.equals(Integer.toString(i)))
                         out.write(" selected ");
                    } %> value='<%= i %>'><c:out value="<%= ejbcawebbean.getText(ADMINTYPES[i]) %>" />
          </option>                   
                <%  }
                  }
                  else{
                  if(oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_CA))){ %>
              >
                <% 
                   canameiter = canameandids.keySet().iterator();
                   for(int i=0; i < canameandids.keySet().size(); i++){ %>
          <option <% 
                      String caname = (String) canameiter.next(); 
                      index = ((Integer) canameandids.get(caname)).intValue(); 
                      if(oldmatchvaluerow2!= null){
                         if(oldmatchvaluerow2.equals(Integer.toString(index)))
                          out.write(" selected ");
                      }
                     %> value='<c:out value="<%= index %>"/>'><c:out value="<%= caname %>" />
          </option>                    
                <%  }
                  }
                  else{
                   if(oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_MODULE))){ %>
              >
                <% for(int i=0; i < modulenames.length; i++){ %>
          <option <% index = ((Integer) moduletexttoid.get(modulenames[i])).intValue();
                      if(oldmatchvaluerow2!= null){
                         if(oldmatchvaluerow2.equals(Integer.toString(index)))
                          out.write(" selected ");
                      }
                     index = ((Integer) moduletexttoid.get(modulenames[i])).intValue();
                     %> value='<c:out value="<%= index %>"/>'><c:out value="<%= modulenames[i] %>" />
          </option>                  
                <%  }
                  }
                  else{ %>
                   disabled > 
                 <% } 
                }}}
              }else{ %>
                disabled > 
           <% } %>
       </select>
       <% if( oldmatchwithrow2!= null){
           if(  oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_EVENT)) || Integer.parseInt(oldmatchwithrow2) == LogMatch.MATCH_WITH_MODULE || oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN)) || oldmatchwithrow2.equals(Integer.toString(LogMatch.MATCH_WITH_CA))){ %>
       <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW2 %>"  size="1" maxlength="255" value='' disabled >    
           <% }else{ %>
              <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW2 %>" size="20" maxlength="255" value='<c:out value="<%=oldmatchvaluerow2 %>"/>' >
           <% }
           }else{ %>
              <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW2 %>" size="20" maxlength="255" value='' >
        <% } %>
    </td>
  </tr>


  <!-- ---------- ROW 3 ---------- -->

  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="5%" align="left">
       <select name='<%= SELECT_CONNECTOR_ROW3  %>'>  
         <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>"/>
         </option>
         <% for(int i=0; i<  connectorreferences.length; i++) { %> 
         <option <% if(oldconnectorrow3 != null)
                      if(oldconnectorrow3.equals(Integer.toString(i))) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
           <c:out value="<%= ejbcawebbean.getText(connectorreferences[i]) %>"/>
         </option> 
         <% } %> 
       </select>
    </td>
    <td width="93%" align="left"> 
        <% tempval = -1;
           if(oldmatchwithrow3!= null)
             tempval= Integer.parseInt(oldmatchwithrow3); %>
        <select name="<%=SELECT_MATCHWITH_ROW3 %>" onchange='changematchfields(3)' >
           <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_EVENT)
                         out.write(" selected ");
                    %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_EVENT) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHEVENT\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_CA)
                         out.write(" selected ");
                    %> value='<c:out value="<%= LogMatch.MATCH_WITH_CA %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCA\") %>" />
           </option>
           <option <%  if(tempval == LogMatch.MATCH_WITH_MODULE)
                         out.write(" selected ");
                    %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_MODULE) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHMODULE\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_USERNAME)
                         out.write(" selected ");
                     %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_USERNAME) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHUSERNAME\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_CERTIFICATE)
                         out.write(" selected ");
                         %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_CERTIFICATE) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCERTIFICATE\") %>" />
           </option>
           <option <%if(tempval == LogMatch.MATCH_WITH_SPECIALADMIN)
                         out.write(" selected ");
                     %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINTYPE\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_ADMINCERTIFICATE)
                         out.write(" selected ");
                     %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_ADMINCERTIFICATE) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINCERT\") %>" />
           </option>
           <option <% if(tempval == LogMatch.MATCH_WITH_IP)
                         out.write(" selected ");
                     %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_IP) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHADMINIP\") %>" />
          </option>
          <option <%if(tempval == LogMatch.MATCH_WITH_COMMENT)
                         out.write(" selected ");
                     %> value='<c:out value="<%= Integer.toString(LogMatch.MATCH_WITH_COMMENT) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"MATCHCOMMENT\") %>" />
          </option>
        </select> &nbsp;&nbsp;
          <%
           tempval = -1;
           if(oldmatchtyperow3!= null)
             tempval= Integer.parseInt(oldmatchtyperow3);
          %>
        <select name="<%=SELECT_MATCHTYPE_ROW3 %>">
          <% if(oldmatchwithrow3 != null){
               if(Integer.parseInt(oldmatchwithrow3) == LogMatch.MATCH_WITH_EVENT || Integer.parseInt(oldmatchwithrow3) == LogMatch.MATCH_WITH_MODULE 
                  || Integer.parseInt(oldmatchwithrow3) == LogMatch.MATCH_WITH_SPECIALADMIN || Integer.parseInt(oldmatchwithrow3) == LogMatch.MATCH_WITH_CA){ %>
          <option <%  if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option>
             <%  } else if (Integer.parseInt(oldmatchwithrow3) == LogMatch.MATCH_WITH_ADMINCERTIFICATE) { %>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH) {
                        out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
          </option> 
                <% } else{ %>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
          </option> 
            <%  }
              }else{%>
          <option <% if(tempval == BasicMatch.MATCH_TYPE_EQUALS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_EQUALS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"EQUALS\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_BEGINSWITH){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_BEGINSWITH) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"BEGINSWITH\") %>" />
          </option> 
          <option <% if(tempval == BasicMatch.MATCH_TYPE_CONTAINS){
                         out.write(" selected ");
                    } %> value='<c:out value="<%= Integer.toString(BasicMatch.MATCH_TYPE_CONTAINS) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"CONTAINS\") %>" />
           <% } %>  
        </select> &nbsp;&nbsp; 

        <select name="<%=SELECT_MATCHVALUE_ROW3 %>"
           <% if(oldmatchwithrow3 != null){
                 if(oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_EVENT))){ %>
              >
                <% for(int i=0; i < eventnames.length; i++){ %>
          <option <% if(oldmatchvaluerow3!= null){
                       if(Integer.parseInt(oldmatchvaluerow3) == ((Integer) eventtexttoid.get(eventnames[i])).intValue())
                         out.write(" selected ");
                    } %> value='<c:out value="<%= ((Integer) eventtexttoid.get(eventnames[i])).intValue() %>"/>'><c:out value="<%= eventnames[i] %>" />
          </option>                   
                <%  }
                  }
                  else{
                   if(oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN))){ %>
              >
                <% for(int i=0; i < ADMINTYPES.length; i++){ %>
          <option <% if(oldmatchvaluerow3!= null){
                       if(oldmatchvaluerow3.equals(Integer.toString(i)))
                         out.write(" selected ");
                    } %> value='<%= i %>'><c:out value="<%= ejbcawebbean.getText(ADMINTYPES[i]) %>" />
          </option>                   
                <%  }
                  }
                  else{
                  if(oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_CA))){ %>
              >
                <% 
                   canameiter = canameandids.keySet().iterator();
                   for(int i=0; i < canameandids.keySet().size(); i++){ %>
          <option <% 
                      String caname = (String) canameiter.next(); 
                      index = ((Integer) canameandids.get(caname)).intValue(); 
                      if(oldmatchvaluerow3!= null){
                         if(oldmatchvaluerow3.equals(Integer.toString(index)))
                          out.write(" selected ");
                      }
                     %> value='<c:out value="<%= index %>"/>'><c:out value="<%= caname %>" />
          </option>                    
                <%  }
                  }
                  else{
                   if(oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_MODULE))){ %>
              >
                <% for(int i=0; i < modulenames.length; i++){ %>
          <option <% index = ((Integer) moduletexttoid.get(modulenames[i])).intValue();
                      if(oldmatchvaluerow3!= null){
                         if(oldmatchvaluerow3.equals(Integer.toString(index)))
                          out.write(" selected ");
                      }
                     index = ((Integer) moduletexttoid.get(modulenames[i])).intValue();
                     %> value='<c:out value="<%= index %>"/>'><c:out value="<%= modulenames[i] %>" />
          </option>                   
                <%  }
                  }
                  else{ %>
                   disabled > 
                 <% } 
                }}}
              }else{ %>
                disabled > 
           <% } %>
       </select>
       <% if( oldmatchwithrow3!= null){
           if(  oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_EVENT)) || Integer.parseInt(oldmatchwithrow3) == LogMatch.MATCH_WITH_MODULE || oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_SPECIALADMIN)) || oldmatchwithrow3.equals(Integer.toString(LogMatch.MATCH_WITH_CA))){ %>
       <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW3 %>"  size="1" maxlength="255" value='' disabled >    
           <% }else{ %>
              <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW3 %>" size="20" maxlength="255" value='<c:out value="<%=oldmatchvaluerow3 %>"/>' >
           <% }
           }else{ %>
              <input type="text" name="<%=TEXTFIELD_MATCHVALUE_ROW3 %>" size="20" maxlength="255" value='' >
        <% } %>
    </td>
  </tr>


  <!-- ---------- ROW 4 ---------- -->

  <tr> 
    <td width="2%">&nbsp;</td>
    <td width="5%" align="left">
      <select name='<%= SELECT_CONNECTOR_ROW4  %>'>  
         <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>" />
         </option>
         <% for(int i=0; i<  connectorreferences.length; i++) { %> 
         <option <% if(oldconnectorrow4 != null)
                      if(oldconnectorrow4.equals(Integer.toString(i))) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
           <c:out value="<%= ejbcawebbean.getText(connectorreferences[i]) %>" />
         </option> 
         <% } %> 
      </select>
    </td>
    <td width="93%" align="left"> 
      <select name='<%= SELECT_MATCHWITH_ROW4  %>'>  
         <option  value='<%= VALUE_NONE %>'><c:out value="<%= ejbcawebbean.getText(\"NONE\") %>" />
         </option>
         <option <% if(oldmatchwithrow4!= null)
                   if(oldmatchwithrow4.equals(Integer.toString(TimeMatch.MATCH_WITH_TIMECREATED)))
                     out.write("selected"); %>
              value='<c:out value="<%= Integer.toString(TimeMatch.MATCH_WITH_TIMECREATED) %>"/>'><c:out value="<%= ejbcawebbean.getText(\"TIME\") %>" />
         </option>       
      </select>  

      <!-- ----- Row 4 : Search after ----- -->

      &nbsp;<c:out value="<%= ejbcawebbean.getText(\"ONORAFTER\") %>" />&nbsp;
      <select name='<%= SELECT_DAY_ROW4  %>' class="day">  
         <% for(int i=1; i <  32; i++) { %> 
         <option <% if(olddayrow4 != null)
                      if(olddayrow4.equals(Integer.toString(i))) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
           <%= i %>
         </option> 
         <% } %> 
      </select>&nbsp;
      <select name='<%= SELECT_MONTH_ROW4  %>' class="month">  
         <% for(int i=0; i < monthreferences.length; i++) { %> 
         <option <% if(oldmonthrow4 != null)
                      if(oldmonthrow4.equals(Integer.toString(i))) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
          <c:out value="<%= ejbcawebbean.getText(monthreferences[i]) %>" />
         </option> 
         <% } %> 
      </select>&nbsp;
      <select name='<%= SELECT_YEAR_ROW4  %>' class="year">  
         <% for(int i=2000; i <  2020; i++) { %> 
         <option <% if(oldyearrow4 != null)
                      if(oldyearrow4.equals(Integer.toString(i))) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
          <%= i %>
         </option> 
         <% } %> 
      </select>&nbsp;
      <select name='<%= SELECT_TIME_ROW4  %>' class="time">  
         <% for (int i=0; i<24; i++) {
              final String thisHour = Integer.toString(i/10) + Integer.toString(i%10); %> 
         <option <% if (thisHour.equals(oldtimerow4)) { out.print(" selected "); } %> value='<%= thisHour %>'> 
             <c:out value="<%= thisHour %>" />
         </option> 
         <% } %> 
      </select>
      <br/>

      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      &nbsp;&nbsp;&nbsp;

      <!-- ----- Row 4 : Search before ----- -->

      &nbsp;<c:out value="<%= ejbcawebbean.getText(\"ONORBEFORE\") %>" />&nbsp;
      <select name='<%= SELECT_DAY_ROW5  %>' class="day"> 
         <%  tempval =0;
             if(olddayrow5 != null){
               tempval = Integer.parseInt(olddayrow5);  
             }else{ 
                tempval = dayofmonth;
             }  
            for(int i=1; i <  32; i++) { %> 
         <option  <%   if(tempval == i) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
           <%= i %>
         </option> 
         <% } %> 
      </select>&nbsp;
      <select name='<%= SELECT_MONTH_ROW5  %>' class="month">  
         <%  tempval =0;
             if(oldmonthrow5 != null){
               tempval = Integer.parseInt(oldmonthrow5);  
             }else{ 
                tempval = month;
             } 

             for(int i=0; i < monthreferences.length; i++) { %> 
         <option <%   if(tempval == i) 
                        out.print(" selected ");
                      %> value='<%= i %>'> 
          <c:out value="<%= ejbcawebbean.getText(monthreferences[i]) %>" />
         </option> 
         <% } %> 
      </select>&nbsp;
      <select name='<%= SELECT_YEAR_ROW5  %>' class="year">  
         <%  tempval =0;
             if(oldyearrow5 != null){
               tempval = Integer.parseInt(oldyearrow5);  
             }else{ 
                tempval = year;
             } 
            for(int i=2000; i <  2020; i++) { %> 
         <option  <%   if(tempval == i) 
                        out.print(" selected ");
                      %>value='<%= i %>'> 
          <%= i %>
         </option> 
         <% } %> 
      </select>&nbsp;
      <select name='<%= SELECT_TIME_ROW5 %>' class="time">  
         <% if (oldtimerow5 == null) {
           	  oldtimerow5 = Integer.valueOf(hour).toString();	// Default to using the current hour
            }
            for (int i=0; i<24; i++) {
              final String thisHour = Integer.toString(i/10) + Integer.toString(i%10); %> 
         <option <% if (thisHour.equals(oldtimerow5)) { out.print(" selected "); } %> value='<%= thisHour %>'> 
             <c:out value="<%= thisHour %>" />
         </option> 
         <% } %> 
      </select>
    </td>
  </tr>


  <!-- ---------- Submit ---------- -->

  <tr>
    <td width="2%">&nbsp;</td>
    <td width="5%" align="left">
    </td>
    <td width="93%" align="left"> <input type="submit" name="<%=BUTTON_ADVANCEDLIST %>" onclick='return checkfields()' value='<c:out value="<%= ejbcawebbean.getText(\"SEARCH\") %>"/>'>
    </td>        
  </tr>

</table>
